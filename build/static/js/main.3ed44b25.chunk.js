(this.webpackJsonpgroupshare=this.webpackJsonpgroupshare||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(17),s=n.n(i),c=(n(37),n(38),n(32)),o=n(3),u=n(16),d=function(){return Object(u.b)()},l=u.c,p=n(5),j=n.n(p),b=n(10),f=n(4),h=n(13),v=n.n(h);function x(){return new Promise((function(e){v.a.get("/api/video/all").then((function(t){e(t)}))}))}function O(e){return new Promise((function(t){v.a.get("/api/video/search/".concat(e)).then((function(e){t(e)}))}))}var g=Object(f.b)("videos/getVideosFromApi",Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),m=Object(f.b)("videos/getSearchVideosFromApi",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=(Object(f.b)("video/getOneVideoFromApi",Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),Object(f.c)({name:"upload",initialState:{status:"",videos:[],searchClicks:[0]},reducers:{setVideos:function(e,t){e.videos=t.payload},pushSearchClick:function(e){e.searchClicks[0]=(e.searchClicks[0]+1)%3}},extraReducers:function(e){e.addCase(g.pending,(function(e){e.status="loading"})).addCase(g.fulfilled,(function(e,t){e.status="idle",e.videos=t.payload.videos})).addCase(m.pending,(function(e,t){e.status="loading",e.videos=[]})).addCase(m.fulfilled,(function(e,t){e.status="idle",e.videos=t.payload.videos}))}})),w=y.actions,k=w.setVideos,C=w.pushSearchClick,S=function(e){return e.videos.videos},A=function(e){return e.videos.searchClicks},D=y.reducer,U=n(0);function I(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(o.f)(),s=d();return Object(U.jsx)("div",{style:{display:"inline-block",textAlign:"center"},children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i.push("/results/search_query=".concat(encodeURIComponent(n))),s(C())},children:[Object(U.jsx)("input",{type:"text",value:n,onChange:function(e){e.preventDefault(),a(e.target.value)}}),Object(U.jsx)("button",{children:"Search"})]})})}var V=n(12);n(64);function P(){var e=Object(o.g)(),t=decodeURIComponent(e.query),n=d(),a=l(S),i=l(A),s=Object(o.f)();Object(r.useEffect)((function(){n(k([])),n(m(t))}),i);var c=a.map((function(e){return Object(U.jsxs)("div",{className:"searchrow",style:{padding:"20px 0px 20px 0px"},onClick:function(){return t=e._id,void s.push("/watch/".concat(t));var t},children:[Object(U.jsx)("img",{src:"https://getuikit.com/v2/docs/images/placeholder_600x400.svg"}),Object(U.jsxs)("div",{className:"videoinfo",children:[e.title," ",Object(U.jsx)("br",{}),e.author," ",Object(U.jsx)("br",{}),e.views," ",Object(U.jsx)("br",{})]})]})}));return Object(U.jsxs)("div",{className:"grid",children:[Object(U.jsx)("div",{id:"sidebar",children:"Sidebar"}),Object(U.jsx)("div",{id:"searchrows",children:c})]})}n(31);var T=Object(f.b)("upload/postVideo",function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=t.token,a=t.history,""!==n.video){e.next=3;break}return e.abrupt("return");case 3:(i=new FormData).append("author",localStorage.username),i.append("description",n.description),i.append("thumbnail",n.thumbnail),i.append("status",n.status),i.append("title",n.title),i.append("url",n.url),s=F(n.video),i.append("video",s,n.fileName),v.a.post("/api/video",i,{headers:{token:r,author:localStorage.username}}).then((function(e){"successful"===e.data.status?a.push("/"):a.push("/login")}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function F(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),r=new Uint8Array(n),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return new Blob([n],{type:"video/mp4"})}var R=Object(f.c)({name:"upload",initialState:{author:"",description:"",fileName:"Upload",status:"idle",thumbnail:"",title:"",url:"",video:""},reducers:{setAuthor:function(e,t){e.author=t.payload},setTitle:function(e,t){e.title=t.payload},setDescription:function(e,t){e.description=t.payload},setUrl:function(e,t){e.url=t.payload},setFilename:function(e,t){e.fileName=t.payload},setThumbnail:function(e,t){e.thumbnail=t.payload},setStatus:function(e,t){e.status=t.payload},setVideo:function(e,t){e.video=t.payload}}}),E=R.actions,L=(E.setAuthor,E.setDescription),N=E.setFilename,_=(E.setStatus,E.setThumbnail,E.setTitle),B=(E.setUrl,E.setVideo),q=function(e){return e.upload.author},J=function(e){return e.upload.description},W=function(e){return e.upload.fileName},G=function(e){return e.upload.title},M=function(e){return e.upload},$=function(e){return e.upload.video},z=R.reducer;function H(e,t){return new Promise((function(n){v.a.post("api/login/login",{username:e,password:t}).then((function(e){n(e)}))}))}var K={status:"",username:"user",password:"pass",errors:{username:"",password:""},loggedIn:!(void 0===localStorage.expiresAt||localStorage.expiresAt<Date.now())||(document.cookie="",!1),token:localStorage.username||document.cookie?document.cookie:""};var Q=Object(f.b)("login/loginFromApi",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t.username,t.password);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),X=Object(f.c)({name:"login",initialState:K,reducers:{setUsername:function(e,t){e.username=t.payload},setPassword:function(e,t){e.password=t.payload},setUsernameError:function(e,t){e.errors.username=t.payload},setPasswordError:function(e,t){e.errors.password=t.payload},setLoggedIn:function(e,t){e.loggedIn=t.payload},setToken:function(e,t){e.token=t.payload}},extraReducers:function(e){e.addCase(Q.pending,(function(e){e.status="loading"})).addCase(Q.fulfilled,(function(e,t){e.status="idle"}))}}),Y=X.actions,Z=Y.setUsername,ee=Y.setPassword,te=Y.setUsernameError,ne=Y.setPasswordError,re=Y.setLoggedIn,ae=Y.setToken,ie=function(e){return e.login},se=function(e){return e.login.username},ce=function(e){return e.login.password},oe=function(e){return e.login.errors.username},ue=function(e){return e.login.errors.password},de=function(e){return e.login.loggedIn},le=function(e){return e.login.token},pe=X.reducer;function je(){l(q);var e=l(G),t=l(J),n=l(W),r=(l($),l(le)),a=l(M),i=d(),s=Object(o.f)();return l(de)||s.push("/login"),Object(U.jsx)("form",{onSubmit:function(e){e.preventDefault(),i(T({state:a,token:r,history:s}))},children:Object(U.jsxs)("div",{id:"form-container",children:[Object(U.jsx)("div",{id:"side-spacer-left"}),Object(U.jsxs)("div",{id:"inputs",children:[Object(U.jsxs)("label",{id:"title",children:["Title",Object(U.jsx)("br",{}),Object(U.jsx)("textarea",{value:e,onChange:function(e){e.preventDefault(),i(_(e.target.value))}})]}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsxs)("label",{children:["Description",Object(U.jsx)("br",{}),Object(U.jsx)("textarea",{value:t,onChange:function(e){e.preventDefault(),i(L(e.target.value))},style:{height:"120px"}}),Object(U.jsx)("br",{})]}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(U.jsx)("button",{children:"Upload"})})]}),Object(U.jsxs)("div",{id:"video-right",children:[Object(U.jsxs)("label",{children:["Video",Object(U.jsxs)("div",{id:"videoprev",style:{textAlign:"end"},children:[n,Object(U.jsx)("input",{style:{color:"black"},accept:"video/mp4",type:"file",onChange:function(e){if(!(null===e.target.files||e.target.files.length<1)){var t=e.target.files[0];if("video/mp4"==t.type){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){i(B(n.result)),i(N(t.name))}}}}})]})]}),Object(U.jsx)("br",{})]}),Object(U.jsx)("div",{id:"side-spacer-right"})]})})}n(65);function be(){var e=d(),t=l(S),n=Object(o.f)();Object(r.useEffect)((function(){e(g())}),[]);var a=t.map((function(e){return Object(U.jsxs)("div",{className:"video",onClick:function(){return t=e._id,void n.push("/watch/".concat(t));var t},children:[Object(U.jsx)("img",{src:"https://getuikit.com/v2/docs/images/placeholder_600x400.svg"}),Object(U.jsxs)("div",{children:[e.title," ",Object(U.jsx)("br",{}),e.author," ",Object(U.jsx)("br",{}),e.views," views ",Object(U.jsx)("br",{})]})]})}));return Object(U.jsxs)("div",{id:"home",children:[Object(U.jsx)("div",{id:"sidebar"}),Object(U.jsx)("div",{id:"allvideos",children:a})]})}function fe(e){return new Promise((function(t){v.a.get("/api/video/one/".concat(e)).then((function(e){t(e)}))}))}var he=Object(f.b)("oneVideo/getOneVideoFromApi",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ve=Object(f.c)({name:"upload",initialState:{status:"",video:[]},reducers:{setVideo:function(e,t){e.video[0]=t.payload}},extraReducers:function(e){e.addCase(he.pending,(function(e){e.status="loading"})).addCase(he.fulfilled,(function(e,t){e.status="idle",e.video=t.payload.videos}))}}),xe=(ve.actions.setVideo,function(e){return e.oneVideo.video}),Oe=ve.reducer;n(66);function ge(){var e=d(),t=(Object(o.f)(),l(xe)),n=Object(o.g)();return Object(r.useEffect)((function(){e(he(n.id))}),[]),0===t.length?Object(U.jsx)("div",{children:"Loading..."}):Object(U.jsxs)("div",{id:"container",children:[Object(U.jsxs)("div",{id:"onevideocontainer",children:[Object(U.jsx)("video",{id:"video",controls:!0,children:Object(U.jsx)("source",{src:t[0].src,type:"video/mp4"})}),Object(U.jsx)("div",{id:"title",children:t[0].title}),Object(U.jsxs)("div",{id:"description",children:[Object(U.jsxs)("span",{style:{paddingRight:"25px"},children:[t[0].views," views"]}),new Date(t[0].date).toDateString()]}),Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[t[0].likes," likes"]}),Object(U.jsx)("hr",{})]})]}),Object(U.jsx)("div",{id:"sidebar",children:"Sidebar..."})]})}function me(){var e=d(),t=l(ie),n=l(se),r=l(ce),a=l(oe),i=l(ue),s=Object(o.f)();function c(t,n){switch(t){case"username":n.length<4?e(te("Username must be at least ".concat(4," characters long!"))):e(te(""));break;case"password":n.length<4?e(ne("Password must be at least ".concat(4," characters long!"))):e(ne(""))}}return Object(U.jsx)("div",{style:{textAlign:"center"},children:Object(U.jsxs)("form",{onSubmit:function(a){a.preventDefault(),n.length<4||r.length<4||e(Q(t)).then((function(t){"successful"===t.payload.status?(localStorage.setItem("username",t.payload.username),localStorage.setItem("token",t.payload.token),localStorage.setItem("expiresAt",Date.now()+t.payload.expiresIn),document.cookie=t.payload.token,e(re(!0)),e(ae(t.payload.token)),s.push("/")):"wrong_password"===t.payload.status?e(ne("Incorrect Password!")):(e(te("Incorrect Login Details!")),e(ne("Incorrect Login Details!")))}))},children:[Object(U.jsxs)("label",{children:["Username:",Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"text",name:"username",value:n,onChange:function(t){e(Z(t.target.value)),c("username",t.target.value)}}),Object(U.jsx)("br",{}),a]}),Object(U.jsx)("br",{}),Object(U.jsxs)("label",{children:["Password:",Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"password",name:"password",value:r,onChange:function(t){e(ee(t.target.value)),c("password",t.target.value)}}),Object(U.jsx)("br",{}),i]}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("input",{type:"submit",value:"Login"})]})})}var ye=function(){return Object(U.jsx)("div",{id:"App",children:Object(U.jsxs)(V.a,{children:[Object(U.jsxs)("div",{id:"header",children:[Object(U.jsx)(V.b,{style:{display:"inline-block"},to:"/",children:Object(U.jsx)("p",{id:"logo",children:"GroupShare"})}),Object(U.jsx)("div",{style:{textAlign:"center",paddingTop:"7px"},children:Object(U.jsx)(I,{})}),Object(U.jsxs)("div",{style:{paddingTop:"5px"},children:[Object(U.jsx)(V.b,{style:{display:"inline-block",padding:"0 15px 0 15px"},to:"/login",children:l(de)?"Switch User":"Login"}),Object(U.jsx)(V.b,{style:{display:"inline-block",padding:"0 15px 0 15px"},to:"/upload",children:"Upload"})]})]}),Object(U.jsxs)(o.c,{children:[Object(U.jsx)(o.a,{exact:!0,path:"/",children:Object(U.jsx)(be,{})}),Object(U.jsx)(o.a,{exact:!0,path:"/watch/:id",children:Object(U.jsx)(ge,{})}),Object(U.jsx)(o.a,{path:"/results/search_query=:query",children:Object(U.jsx)(P,{})}),Object(U.jsx)(o.a,{path:"/login",children:Object(U.jsx)(me,{})}),Object(U.jsx)(o.a,{path:"/upload",children:Object(U.jsx)(je,{})})]})]})})};function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var ke=Object(f.b)("counter/fetchCount",function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(f.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(ke.pending,(function(e){e.status="loading"})).addCase(ke.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Se=Ce.actions,Ae=(Se.increment,Se.decrement,Se.incrementByAmount,Ce.reducer),De=Object(f.a)({reducer:{counter:Ae,upload:z,videos:D,oneVideo:Oe,login:pe}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(u.a,{store:De,children:Object(U.jsx)(ye,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.3ed44b25.chunk.js.map